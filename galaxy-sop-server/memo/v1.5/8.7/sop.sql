INSERT INTO `dict` (`id`,`parent_code`,`name`,`dict_value`,`dict_code`,`dict_sort`,`text`,`created_time`,`updated_time`,`is_delete`) VALUES (181,'meeting3Result','补充材料',1,'meeting3Result:1',1,'立项会结果-补充材料','1456382861380','1456382861380',0);
INSERT INTO `dict` (`id`,`parent_code`,`name`,`dict_value`,`dict_code`,`dict_sort`,`text`,`created_time`,`updated_time`,`is_delete`) VALUES (182,'meeting3Result','闪投',2,'meeting3Result:2',2,'立项会结果-闪投','1456382861380','1456382861380',0);
INSERT INTO `dict` (`id`,`parent_code`,`name`,`dict_value`,`dict_code`,`dict_sort`,`text`,`created_time`,`updated_time`,`is_delete`) VALUES (183,'meeting3Result','投资',3,'meeting3Result:3',3,'立项会结果-投资','1456382861380','1456382861380',0);
INSERT INTO `dict` (`id`,`parent_code`,`name`,`dict_value`,`dict_code`,`dict_sort`,`text`,`created_time`,`updated_time`,`is_delete`) VALUES (184,'meeting3Result','观望',4,'meeting3Result:4',4,'立项会结果-观望','1456382861380','1456382861380',0);
INSERT INTO `dict` (`id`,`parent_code`,`name`,`dict_value`,`dict_code`,`dict_sort`,`text`,`created_time`,`updated_time`,`is_delete`) VALUES (185,'meeting3Result','转向',5,'meeting3Result:5',5,'立项会结果-转向','1456382861380','1456382861380',0);
INSERT INTO `dict` (`id`,`parent_code`,`name`,`dict_value`,`dict_code`,`dict_sort`,`text`,`created_time`,`updated_time`,`is_delete`) VALUES (186,'meeting3Result','否决',6,'meeting3Result:6',6,'立项会结果-否决','1456382861380','1456382861380',0);
INSERT INTO `dict` (`id`,`parent_code`,`name`,`dict_value`,`dict_code`,`dict_sort`,`text`,`created_time`,`updated_time`,`is_delete`) VALUES (187,'meeting5Result','跟进中',1,'meeting5Result:1',1,'商务谈判会议结果-跟进中','1456382861380','1456382861380',0);
INSERT INTO `dict` (`id`,`parent_code`,`name`,`dict_value`,`dict_code`,`dict_sort`,`text`,`created_time`,`updated_time`,`is_delete`) VALUES (188,'meeting5Result','否决',2,'meeting5Result:2',2,'商务谈判会议结果-否决','1456382861380','1456382861380',0);
INSERT INTO `dict` (`id`,`parent_code`,`name`,`dict_value`,`dict_code`,`dict_sort`,`text`,`created_time`,`updated_time`,`is_delete`) VALUES (189,'meeting5Result','闪投',3,'meeting5Result:3',3,'商务谈判会议结果-闪投','1456382861380','1456382861380',0);
INSERT INTO `dict` (`id`,`parent_code`,`name`,`dict_value`,`dict_code`,`dict_sort`,`text`,`created_time`,`updated_time`,`is_delete`) VALUES (190,'meeting5Result','投资',4,'meeting5Result:4',4,'商务谈判会议结果-投资','1456382861380','1456382861380',0);
INSERT INTO `dict` (`id`,`parent_code`,`name`,`dict_value`,`dict_code`,`dict_sort`,`text`,`created_time`,`updated_time`,`is_delete`) VALUES (191,'meetingType','商务谈判会议',5,'meetingType:5',5,'会议类型-商务谈判会议','1456382861380','1456382861380',0);
INSERT INTO `dict` (`id`,`parent_code`,`name`,`dict_value`,`dict_code`,`dict_sort`,`text`,`created_time`,`updated_time`,`is_delete`) VALUES (192,'projectProgress','会后商务谈判',11,'projectProgress:11',5,'项目流程-商务谈判','1456382861380','1456382861380',0);



INSERT INTO `fx_db`.`dict` (`id`, `parent_code`, `name`, `dict_value`, `dict_code`, `dict_sort`, `text`, `created_time`, `updated_time`, `is_delete`) VALUES ('193', 'xhhl', '会议结论原因', '28', 'meetingResultReason', '28', '会议结论原因', '1456382861380', '1456382861380', '0');
INSERT INTO `fx_db`.`dict` (`id`, `parent_code`, `name`, `dict_value`, `dict_code`, `dict_sort`, `text`, `created_time`, `updated_time`, `is_delete`) VALUES ('194', 'meetingResultReason', '否决原因', '1', 'meetingVetoReason', '1', '会议否决原因', '1456382861380', '1456382861380', '0');
INSERT INTO `fx_db`.`dict` (`id`, `parent_code`, `name`, `dict_value`, `dict_code`, `dict_sort`, `created_time`, `updated_time`, `is_delete`) VALUES ('195', 'meetingVetoReason', '签约其他投资机构', '1', 'meetingVetoReason:1', '1', '1456382861380', '1456382861380', '0');
INSERT INTO `fx_db`.`dict` (`id`, `parent_code`, `name`, `dict_value`, `dict_code`, `dict_sort`, `created_time`, `updated_time`, `is_delete`) VALUES ('196', 'meetingVetoReason', '签约其他投资机构', '2', 'meetingVetoReason:2', '2', '1456382861380', '1456382861380', '0');
INSERT INTO `fx_db`.`dict` (`id`, `parent_code`, `name`, `dict_value`, `dict_code`, `dict_sort`, `created_time`, `updated_time`, `is_delete`) VALUES ('197', 'meetingVetoReason', '签约其他投资机构', '3', 'meetingVetoReason:3', '3', '1456382861380', '1456382861380', '0');
INSERT INTO `fx_db`.`dict` (`id`, `parent_code`, `name`, `dict_value`, `dict_code`, `dict_sort`, `created_time`, `updated_time`, `is_delete`) VALUES ('198', 'meetingVetoReason', '决策改变等', '4', 'meetingVetoReason:4', '4', '1456382861380', '1456382861380', '0');
INSERT INTO `fx_db`.`dict` (`id`, `parent_code`, `name`, `dict_value`, `dict_code`, `dict_sort`, `created_time`, `updated_time`, `is_delete`) VALUES ('199', 'meetingVetoReason', '其他原因', '5', 'meetingVetoReason:5', '5', '1456382861380', '1456382861380', '0');
INSERT INTO `fx_db`.`dict` (`id`, `parent_code`, `name`, `dict_value`, `dict_code`, `dict_sort`, `text`, `created_time`, `updated_time`, `is_delete`) VALUES ('200', 'meetingResultReason', '待定原因', '2', 'meetingUndeterminedReason', '2', '会议待定原因', '1456382861380', '1456382861380', '0');
INSERT INTO `fx_db`.`dict` (`id`, `parent_code`, `name`, `dict_value`, `dict_code`, `dict_sort`, `created_time`, `updated_time`, `is_delete`) VALUES ('201', 'meetingUndeterminedReason', '信息未获取全面', '1', 'meetingUndeterminedReason:1', '1', '1456382861380', '1456382861380', '0');
INSERT INTO `fx_db`.`dict` (`id`, `parent_code`, `name`, `dict_value`, `dict_code`, `dict_sort`, `created_time`, `updated_time`, `is_delete`) VALUES ('202', 'meetingUndeterminedReason', '其他原因', '2', 'meetingUndeterminedReason:2', '2', '1456382861380', '1456382861380', '0');
INSERT INTO `fx_db`.`dict` (`id`, `parent_code`, `name`, `dict_value`, `dict_code`, `dict_sort`, `text`, `created_time`, `updated_time`, `is_delete`) VALUES ('203', 'meetingResultReason', '跟进中原因', '3', 'meetingFollowingReason', '3', '会议跟进中原因', '1456382861380', '1456382861380', '0');
INSERT INTO `fx_db`.`dict` (`id`, `parent_code`, `name`, `dict_value`, `dict_code`, `dict_sort`, `created_time`, `updated_time`, `is_delete`) VALUES ('204', 'meetingFollowingReason', '未到下一轮融资期', '1', 'meetingFollowingReason:1', '1', '1456382861380', '1456382861380', '0');
INSERT INTO `fx_db`.`dict` (`id`, `parent_code`, `name`, `dict_value`, `dict_code`, `dict_sort`, `created_time`, `updated_time`, `is_delete`) VALUES ('205', 'meetingFollowingReason', '其他原因', '2', 'meetingFollowingReason:2', '2', '1456382861380', '1456382861380', '0');


/*调整投资流程显示顺序*/
UPDATE `fx_db`.`dict` SET `dict_sort`='5' WHERE `id`='192';
UPDATE `fx_db`.`dict` SET `dict_sort`='6' WHERE `id`='32';
UPDATE `fx_db`.`dict` SET `dict_sort`='7' WHERE `id`='33';
UPDATE `fx_db`.`dict` SET `dict_sort`='8' WHERE `id`='34';
UPDATE `fx_db`.`dict` SET `dict_sort`='9' WHERE `id`='35';
UPDATE `fx_db`.`dict` SET `dict_sort`='10' WHERE `id`='36';
UPDATE `fx_db`.`dict` SET `dict_sort`='11' WHERE `id`='37';

UPDATE `fx_db`.`dict` SET `name`='投资估值未达成一致' WHERE `id`='196';
UPDATE `fx_db`.`dict` SET `name`='投资方式未达成一致（如并购、财务投资，服务费等）' WHERE `id`='197';

/**
 * 放弃的任务对其任务对应的文件进行处理
 */
insert into `dict` (`id`, `parent_code`, `name`, `dict_value`, `dict_code`, `dict_sort`, `text`, `created_time`, `updated_time`, `is_delete`) values('216','fileStatus','已放弃','4','fileStatus:4','4','文档状态','145638261380','145638261380','0');


ALTER TABLE `fx_db`.`sop_file`   
	  CHANGE `fil_uri` `fil_uri` VARCHAR(300) CHARSET utf8 COLLATE utf8_bin NULL  COMMENT '存储地址';

ALTER TABLE `fx_db`.`sop_project`   
  ADD COLUMN `progress_history` VARCHAR(255) NULL  COMMENT '流程历史记录(逗号分割)';
ALTER TABLE `fx_db`.`sop_project`  
  ADD COLUMN `business_type_code` VARCHAR(20) NULL  COMMENT '业务类型编码：TZ-投资，ST-闪投'; 
  
   ALTER TABLE `fx_db`.`sop_interview_record` 
ADD COLUMN `interview_result` VARCHAR(32) NULL COMMENT '访谈结果' AFTER `schedule_id`;
  ALTER TABLE `fx_db`.`sop_interview_record` 
ADD COLUMN `result_reason` VARCHAR(32) NULL COMMENT '原因' AFTER `interview_result`;
  ALTER TABLE `fx_db`.`sop_interview_record` 
ADD COLUMN `reason_other` VARCHAR(32) NULL COMMENT '其他原因' AFTER `result_reason`;
  ALTER TABLE `fx_db`.`sop_meeting_record` 
ADD COLUMN `result_reason` VARCHAR(32) NULL COMMENT '原因' AFTER `update_time`;
  ALTER TABLE `fx_db`.`sop_meeting_record` 
ADD COLUMN `reason_other` VARCHAR(32) NULL COMMENT '其他原因' AFTER `result_reason`;
ALTER TABLE `fx_db`.`sop_interview_record` 
ADD COLUMN `notes_remark` TEXT NULL COMMENT '访谈纪要备份字段' AFTER `reason_other`;
ALTER TABLE `fx_db`.`sop_meeting_record` 
ADD COLUMN `notes_remark` TEXT NULL COMMENT '会议纪要备份字段' AFTER `reason_other`;

/**
 * 更改脚本
 */

ALTER TABLE `fx_db`.`sop_file`   
	  CHANGE `fil_uri` `fil_uri` VARCHAR(300) CHARSET utf8 COLLATE utf8_bin NULL  COMMENT '存储地址';
ALTER TABLE `fx_db`.`sop_file` ADD COLUMN `interview_record_id` bigint(20) NULL COMMENT '关联访谈ID';
ALTER TABLE `fx_db`.`sop_file` ADD COLUMN `meeting_record_id` bigint(20) NULL COMMENT '关联会议ID';
alter table `fx_db`.`sop_interview_record` modify column result_reason varchar(50) COMMENT '原因';
alter table `fx_db`.`sop_meeting_record` modify column result_reason varchar(50) COMMENT '原因';
alter table `fx_db`.`sop_interview_record` modify column reason_other varchar(50) COMMENT '其他原因';
alter table `fx_db`.`sop_meeting_record` modify column reason_other varchar(50) COMMENT '其他原因';
UPDATE dict SET NAME = '人事尽职调查报告' WHERE NAME= '人力资源尽职调查报告';
UPDATE sop_project  SET business_type_code='TZ' WHERE business_type_code IS NULL;

UPDATE sop_meeting_record SET notes_remark=meeting_notes;
UPDATE sop_interview_record SET notes_remark=view_notes;
 UPDATE power.resource SET resource_type = 5 
WHERE resource_code IN (
'dataBriefing','project_view_module','div_duration_gg',
'div_performance_gg','div_pro_doc','div_idea',
'div_matter_preview_gg','div_project_progress','div_health_gg',
'task_list','div_project_post_analysis_gg');
ALTER TABLE `fx_db`.`sop_file` ADD COLUMN `interview_record_id` bigint(20) NULL COMMENT '关联访谈ID';
ALTER TABLE `fx_db`.`sop_file` ADD COLUMN `meeting_record_id` bigint(20) NULL COMMENT '关联会议ID';

/*历史数据流程历史处理*/
UPDATE sop_project SET progress_history=
CASE project_progress 
WHEN 'projectProgress:1' THEN 'projectProgress:1'
WHEN 'projectProgress:2' THEN 'projectProgress:1,projectProgress:2'
 WHEN 'projectProgress:3' THEN 'projectProgress:1,projectProgress:2,projectProgress:3'
 WHEN 'projectProgress:4' THEN 'projectProgress:1,projectProgress:2,projectProgress:3,projectProgress:4'
 WHEN 'projectProgress:11' THEN 'projectProgress:1,projectProgress:2,projectProgress:3,projectProgress:4,projectProgress:11'
 WHEN 'projectProgress:5' THEN 'projectProgress:1,projectProgress:2,projectProgress:3,projectProgress:4,projectProgress:11,projectProgress:5'
WHEN 'projectProgress:6' THEN 'projectProgress:1,projectProgress:2,projectProgress:3,projectProgress:4,projectProgress:11,projectProgress:5,projectProgress:6'
 WHEN 'projectProgress:7' THEN 'projectProgress:1,projectProgress:2,projectProgress:3,projectProgress:4,projectProgress:11,projectProgress:5,projectProgress:6,projectProgress:7'
WHEN 'projectProgress:8' THEN 'projectProgress:1,projectProgress:2,projectProgress:3,projectProgress:4,projectProgress:11,projectProgress:5,projectProgress:6,projectProgress:7,projectProgress:8'
 WHEN 'projectProgress:9' THEN 'projectProgress:1,projectProgress:2,projectProgress:3,projectProgress:4,projectProgress:11,projectProgress:5,projectProgress:6,projectProgress:7,projectProgress:8,projectProgress:9'
WHEN 'projectProgress:10' THEN 'projectProgress:1,projectProgress:2,projectProgress:3,projectProgress:4,projectProgress:11,projectProgress:5,projectProgress:6,projectProgress:7,projectProgress:8,projectProgress:9,projectProgress:10'
ELSE '' END ;

