<div class="qualificationstc">
    <div class="title_bj" id="team_learn"></div>


    <div class="qualifications_all" >

        <form action="" id="startup_form" method="post">
            <input name="id" style="display:none;">
            <input name="myid" style="display:none;">
            <div class="info clearfix">
                <dl class="fmdl fl">
                    <dt>创业时间：</dt>
                    <dd class="clearfix">
                        <input name="field1" type="text" class="datepicker-month-start-text fl txt time"/>
                        <span class="fl">&nbsp;至&nbsp;</span>
                        <input name="field2" type="text" class="datepicker-month-text fl txt time"/>
                    </dd>
                </dl>
                <dl class="fmdl fl">
                    <dt>担任职务：</dt>
                    <dd class="clearfix">
                        <input name="field3" type="text" class="txt" maxLength="50"/>
                    </dd>
                </dl>
                <div class="team_wid">
                    <p class="team_wid_p"><span>是否是核心创始人：（5%以上创始股权）</span><span><input type="radio" class="team_stock" attr-name="yes" value="核心创始人" name="field4">是</span><span><input type="radio" class="team_stock" attr-name="no" value="非核心创始人"  name="field4">否</span></p>
                    <p class="team_wid_p  team_stock_on"><span>创立时股权比：</span><span><input name="field5" type="text" class="input" maxlength="50"></span></p>
                </div>
                <div class="team_wid">
                    <p>融资机构及金额、成功或失败或离职原因：</p>
                    <textarea name="field6" class="team_textarea"></textarea>
                </div>
                <div class="team_wid">
                    <p>项目概述：</p>
                    <textarea name="field7" class="team_textarea"></textarea>
                </div>
            </div>
         </form>
    </div>
    <div class="button_affrim">
        <a href="javascript:;"  class="register_all_affrim fl add_team_startup">确定</a>
        <a href="javascript:;"  class="fr" id="close_startup"  data-close="close">取消</a>
    </div>
</div>
<script>
    $('.team_stock').change( function(){
        var attr_name=$(this).attr('attr-name');
        if(attr_name=="yes"){
            $('.team_stock_on').show()
        }else{
            $('.team_stock_on').hide()
        }
    })
    function getData1(div){
		var json={};
	    var list = div.find("*[name]");
        $(list).each(function(){
              var key = "";
              var value = "";
              var tagName = $(this).get(0).tagName;
              if(tagName == "INPUT"|| tagName == "TEXTAREA"){
                key = $(this).attr("name");
				 value = $(this).val();
              }
              if(tagName=="SELECT"){
                 key = $(this).attr("name");
                 value = $(this).find("option:selected").val();
              }
              json[key]=value;
              json["field4"]=$("input[name='field4']:checked").val();
        })
        return json;
	}
     $(".add_team_startup").on("click",function(){
        var json = getData1($("#startup_form"));
        if(!json["myid"]){
              //如果id为空,新增一条记录
              var myID = "static" + guid();
              var str = "<div id='"+myID+"' data-flag data-a='"+json["field3"]+"' data-b='"+json["field4"]+"' data-c='"+json["field5"]+"' data-d='"+json["field6"]+"' >"+
              "<span name='id' style='display:none'></span>"+
              "<div class='team_p_one'><span class='team_ico team_ico_dot'></span><span name='field1'>"+json["field1"]+"</span><span>～</span><span name='field2'>"+json["field2"]+"</span></div>"+
			  "<div class='team_p_two'>"+
				"<ul>"+
					"<li data-mix >"+json["field3"]+"/"+json["field4"]+"/"+json["field5"]+"</li>"+
				"</ul>"+
				"<div class='team_click'>"+
					 "<span class='blue team_startup_add'  href='/sop/html/team_startup.html' data-id='"+myID+"' >编辑</span>"+
                     "<span class='blue' onclick='delete_row(this)' data-id='"+myID+"'>删除</span>"+
 				"</div>"+
			   "</div>"+
			   "<div class='team_p_two' name='field7'>"+json["field7"]+"</div></div>"
            $("#team_startup").append(str);
        }else{
            //修改操作,根据id修改dom元素的值
            if($('#'+json["myid"]).length>0){
                    var div = $('#'+json["myid"]);
                    var list = div.find("*[name]");
                    $(list).each(function(){
                          var key = $(this).attr("name");
                          $(this).html(json[key]);
                    })
                    div.attr("data-a",json["field3"]);
                    div.attr("data-b",json["field4"]);
                    div.attr("data-c",json["field5"]);
                    div.attr("data-d",json["field6"]);
                    div.find("ul li[data-mix]").html(json["field3"]+"/"+json["field4"]+"/"+json["field5"]);
            }
        }
        $("#close_startup").click();
    })
</script>