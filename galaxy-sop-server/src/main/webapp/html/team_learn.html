<div class="qualificationstc">

	
	
    <div class="qualifications_all" id="learning">
    
    	<form action="" id="learn_form" method="post">
            <input name="id" style="display:none;">
            <input name="myid" style="display:none;">
            <input name="index" style="display:none;">
        <div class="info clearfix">
            <dl class="fmdl fl">
                <dt>&nbsp;毕业时间：</dt>
                <dd class="clearfix">
                	<input name="field1" type="text" class="datepicker-month-text fl txt time"/>
                </dd>
            </dl>  
            <dl class="fmdl fl">
                <dt>毕业院校：</dt>
                <dd class="clearfix">
                    <input name="field2" type="text" class="txt" maxLength="50"/>
                </dd>
            </dl>
            <dl class="fmdl fl">
                <dt>学习专业：</dt>
                <dd><input name="field3" type="text" class="txt" maxLength="50"/></dd>
            </dl>
            <dl class="fmdl fl">
                <dt>学历：</dt>
                <dd>
                   <select name="field4">
                       <option value="">请选择</option>
                       <option value="高中">高中</option>
                       <option value="大专">大专</option>
                       <option value="本科">本科</option>
                       <option value="硕士">硕士</option>
                       <option value="MBA">MBA</option>
                       <option value="博士">博士</option>
                       <option value="其他">其他</option>
                   </select>
                </dd>
            </dl>
        </div>
        </form>
    </div>
    <div class="button_affrim">
        <a href="javascript:;"  class="register_all_affrim fl add_team_learn" >确定</a>
        <a href="javascript:;" id="close_learn" class="register_all_input fr"  data-close="close">取消</a>
    </div>
</div>
<!--<script>
    $(".add_team_learn").on("click",function(){
        var eduJson = getData($("#learn_form"));
        if(!eduJson["myid"] && !edu["id"]){
              //如果id为空,新增一条记录
              var myID = "static" + guid();
              var str = "<div id='"+myID+"' data-flag><span name='id' style='display:none'>"+eduJson['id']+"</span>"+
               "<div class='team_p_one'><span class='team_ico team_ico_dot' ></span><span>毕业时间：</span><span name='field1'>"+eduJson['field1']+"</span></div>"+
                "<div class='team_p_two'>"+
                    "<ul>"+
                        "<li><span>学校：</span><span name='field2'>"+eduJson['field2']+"</span></li>"+
                        "<li><span>学位：</span><span name='field3'>"+eduJson['field3']+"</span></li>"+
                        "<li><span>所学专业：</span><span name='field4'>"+eduJson['field4']+"</span></li>"+
                    "</ul>"+
                    "<div class='team_click'>"+
                    "<span class='blue team_learn_add'  href='/sop/html/team_learn.html' data-id='"+myID+"' >编辑</span>"+
                    "<span class='blue' onclick='delete_row(this)' data-id='"+myID+"'>删除</span>"+
                    "</div>"+
                "</div>"+
                "</div>"
              $("#team_learn").append(str);
        }else{
            //修改操作,根据id修改dom元素的值
            if($('#'+eduJson["myid"]).length>0){
                var list = $('#'+eduJson["myid"]).find("*[name]");
                $(list).each(function(){
                      var key = $(this).attr("name");
                      $(this).html(eduJson[key]);
                })
            }
        }
        $("#close_learn").click();
    })
</script>-->
<script>
  $(".add_team_learn").on("click",function(){
        var eduJson = getData($("#learn_form"));
        var tmp = "<tr row-id><td>"+eduJson['field1']+"</td><td>"+eduJson['field2']+"</td>";
        tmp += "<td>"+eduJson['field3']+"</td><td>"+eduJson['field4']+"</td><td>";
        tmp += "<span class='blue' data-btn='btn' onclick='editRow(this)'>编辑</span>";
        tmp += "<span class='blue' data-btn='btn' onclick='delRow(this)'>删除</span>";
        tmp += "</td></tr>";
        $("#team_learn").append(tmp);
        $("#close_learn").click();
    })

    function delRow(ele)
    {
        if(confirm('确定要删除？'))
        {
            var tr = $(ele).closest('tr');
            tr.remove();
        }
    }
    function editRow(ele)
    {
        var row = $(ele).closest('tr');
        $.getHtml({
            url:"/sop/html/team_learn.html",//模版请求地址
            data:"",//传递参数
            okback:function(){
                $.each($("#learn_form").find("input, select, textarea"),function(){
                    var ele = $(this);
                    var name = ele.attr('name');
                    ele.val(row.data(name));
                });
                $("#learn_form input[name='index']").val(row.index());

            }//模版反回成功执行
        });
    }
    /**
     * 保存至到tr标签data属性
     */
    function saveRow(data)
    {
        data = JSON.parse(data);
        var titleId = data.titleId;
        var index = data.index;
        if(typeof index == 'undefined' || index == null || index == '')
        {
            var tr = buildRow(data,true);
            $('table[data-title-id="'+titleId+'"].editable').append(tr);
        }
        else
        {
            var tr = $('table[data-title-id="'+titleId+'"].editable').find('tr:eq('+index+')');
            for(var key in data)
            {
                if(key.indexOf('field')>-1)
                {
                    tr.data(key,data[key]);
                    tr.find('td[data-field-name="'+key+'"]').text(data[key]);
                }
            }
        }
        $("a[data-close='close']").click();
    }
</script>