<!-- 日历插件 -->
<link href="/sop/bootstrap/bootstrap-datepicker/datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet" media="screen">
<link href="/sop/bootstrap/bootstrap-datepicker/css/bootstrap-datepicker3.css" type="text/css" rel="stylesheet"/>
<script type="text/javascript" src="/sop/bootstrap/bootstrap-datepicker/datetimepicker/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/sop/bootstrap/bootstrap-datepicker/datetimepicker/js/bootstrap-datetimepicker.js" charset="UTF-8"></script>
<script type="text/javascript" src="/sop/bootstrap/bootstrap-datepicker/datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js" charset="UTF-8"></script>
<script src="/sop/bootstrap/bootstrap-datepicker/js/datepicker-init.js"></script>
<div class="qualificationstc">
	<div class="title_bj" id="team_learn_name">添加学习经历</div>
	
	
    <div class="qualifications_all" id="learning">
    
    	<form action="" id="learn_form" method="post">
            <input name="id" style="display:none;">
            <input name="index" style="display:none;">
            <div class="info clearfix">
            <dl class="fmdl">
                <dt>&nbsp;毕业时间：</dt>
                <dd class="clearfix">
                    <input readonly name="field1" class="datepicker-month-text fl txt time" id="graduationDate" type="text" data-date-format="yyyy-mm">

                </dd>
            </dl>  
            <dl class="fmdl">
                <dt>毕业院校：</dt>
                <dd class="clearfix">
                    <input name="field2" type="text" class="txt" maxlength="100"/>
                </dd>
            </dl>
            <dl class="fmdl">
                <dt>学习专业：</dt>
                <dd><input name="field3" type="text" class="txt" maxlength="100"/></dd>
            </dl>
            <dl class="fmdl">
                <dt>学历：</dt>
                <dd>
                   <select name="field4">
                       <option value="">请选择</option>
                       <option value="高中">高中</option>
                       <option value="大专">大专</option>
                       <option value="本科">本科</option>
                       <option value="硕士">硕士</option>
                       <option value="MBA">MBA</option>
                       <option value="博士">博士</option>
                       <option value="其他">其他</option>
                   </select>
                </dd>
            </dl>
        </div>
        </form>
    </div>
    <div class="button_affrim">
        <a href="javascript:;"  class="register_all_affrim fl add_team_learn" >确定</a>
        <a href="javascript:;" id="close_learn" class="register_all_input fr"  data-close="close">取消</a>
    </div>
</div>


<script>

    //日期
     var currDate = new Date();
     var currYear=currDate.getFullYear();
/*     $("#graduationDate").datetimepicker({
        minView: 'yyyy-mm',
    	startView:3,
        minView:3,
    	
    	language: 'zh-CN',
    	autoclose:true
    }) */
     $(function(){
        $("#learn_form").validate({
             submitHandler:function(form){
                 save_learn();
             }
        });
    })
   function save_learn(){
        var eduJson ={};
        $.each($("#learn_form").find("input, select"),function(){
            var ele = $(this);
            var name = ele.attr('name');
            eduJson[name]= ele.val();
            if(name=="field1"){
            	 if(ele.val()){
            		 eduJson[name]= ele.val();
                }else{
                     eduJson[name]="未知"
                }
            }else{
            	 if(name.indexOf("field")>-1){
                     if(ele.val()){
                            eduJson[name]= ele.val();
                       }else{
                            eduJson[name]="未知"
                       }
                }
            }
           
        });

        var index = eduJson["index"];
        if(!index){
              //新增一条记录
              var filed1=eduJson['field1'];
              if(filed1=="未知" || filed1=="毕业"){
            	  filed1=filed1;
              }else{
            	  filed1=filed1+"毕业";
              }
              var str = "<div  data-flag class='team_div'><span name='id' style='display:none'>"+eduJson["id"]+"</span>"+
               "<div class='team_p_one'><span class='team_ico team_ico_dot' ></span><span name='field1'>"+filed1+"</span></div>"+
                "<div>"+
                    "<ul style='margin-left:16px;'>"+
                        "<li><span name='field2'>"+eduJson['field2']+"</span></li>"+
                        "<li><span name='field3'>"+eduJson['field3']+"</span>&nbsp;·&nbsp;<span name='field4'>"+eduJson['field4']+"</span></li>"+
                    "</ul>"+
                    "<div class='team_click'>"+
                    "<span class='blue ' onclick='editStudy(this)' >编辑</span>"+
                    "<span class='blue' onclick='delete_row(this)' >删除</span>"+
                    "</div>"+
                "</div>"+
                "</div>"
              $("#team_learn").append(str);
        }else{
            var div = $("#team_learn").find("div[data-flag]:eq("+index+")");
            var list = div.find("*[name]");
            $(list).each(function(){
                  var key = $(this).attr("name");
                  $(this).html(eduJson[key]);
            })
        }
        $("#close_learn").click();
   }
   $(".add_team_learn").on("click",function(){
        $("#learn_form").submit();
       
   }) 
</script>